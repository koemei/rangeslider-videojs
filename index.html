<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Clipping Tool Test</title>

		<!--video-js-->
		<link href="//vjs.zencdn.net/4.2/video-js.css" rel="stylesheet">
		<script src="lib/video-js/video.dev.js"></script>

		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>

		<!--YouTube Plugin-->
		<script src="lib/vjs.youtube.js"></script>

		<!--HoverBox Plugin -->
		<script src="src/hoverbox.js"></script>
		<link href="src/hoverbox.css" rel="stylesheet">

		<!--RangeSlider Plugin-->
		<script src="src/rangeslider.js"></script>
		<link href="build/rangeslider.min.css" rel="stylesheet">

	  <!--Demo CSS-->
		<link href="demo.css" rel="stylesheet">

  </head>

  <body style="margin:10px">
    <h1 class="title">Clip a learning moment</h1>

	<video id="vid1" src="" class="video-js vjs-default-skin" controls preload="auto" width="640" height="360"></video>

  <script>
	  videojs('vid1', { "techOrder": ["youtube"], "src": "http://www.youtube.com/watch?v=bTUrWYv2vtU" }).ready(function() {
	    // Detect when the YouTube API is ready
	    this.on('apiready', function() {
	      console.log('YouTube API is ready!');
	    });

	    // Cue a video using ended event
	    this.one('ended', function() {
	      this.src('http://www.youtube.com/watch?v=bTUrWYv2vtU');
	    });
	  });
  </script>

	<script>


		$( document ).ready(function() {

			var options ={hidden:false, locked:false, panel:false};
			mplayer = videojs("vid1");
			mplayer.rangeslider(options);
			mplayer.hoverbox();
			mplayer.addChild('HoverBox');
			var domain = $(location).attr('href');

			var playClip = function(url) {
				var arr = url.split('=');
				var start = parseFloat(arr[1]);
				var end = parseFloat(arr[2]);
				// mplayer.rangeslider.start = start;
				// mplayer.rangeslider.end = end;
				mplayer.rangeslider.playBetween(start, end).call(mplayer);
				mplayer.setValueSlider(start, end);
			};

			if (domain.indexOf('?start') < domain.indexOf('&end')) {
				suffix = domain.split('/').pop();
				playClip(suffix);
			}


		});
		//Example of options ={hidden:false,locked:true,panel:false}


		function playBetween(){
			var start = document.getElementById('Start').value,
				end = document.getElementById('End').value;
			mplayer.playBetween(start,end);
		}

	    function loopBetween() {
	        var start = document.getElementById('Start').value;
	        var end = document.getElementById('End').value;
	        mplayer.loopBetween(start, end);
	    }

		function getValues(){
			var values = mplayer.getValueSlider();
            console.log(values);
			document.getElementById('Start').value=videojs.round(values.start,2);
			document.getElementById('End').value=videojs.round(values.end,2);
		}

		function showhide(){
			var plugin=mplayer.rangeslider.options;
			if(plugin.hidden)
				mplayer.showSlider();
			else
				mplayer.hideSlider();
		}
		function lockunlock(){
			var plugin=mplayer.rangeslider.options;
			if(plugin.locked)
				mplayer.unlockSlider();
			else
				mplayer.lockSlider();
		}
		function showhidePanel(){
			var plugin=mplayer.rangeslider.options;
			if(!plugin.panel)
				mplayer.showSliderPanel();
			else
				mplayer.hideSliderPanel();
		}
		function showhideControlTime(){
			var plugin=mplayer.rangeslider.options;
			if(!plugin.controlTime)
				mplayer.showControlTime();
			else
				mplayer.hideControlTime();
		}
	</script>
    <div id="fieldSelection">
		<legend>Actions</legend>
		<div class="button" onClick="showhide()">Show/Hide RS</div>
		<div class="button" onClick="lockunlock()">Lock/Unlock RS</div>
		<div class="button" onClick="showhidePanel()">show/hide Panel</div>
		<div class="button" onClick="showhideControlTime()">show/hide ControlTime</div>
	</div>
	<div id="hover">
		<div class="button" onClick="getValues()">get values!</div>
	</div>
	<div id="fieldSelection">
		<legend>Select a section of the video</legend>
		<div class="button" onClick="playBetween()">Play Between</div>
        <div class="button" onClick="loopBetween()">Loop Between</div>
		<div class="button" onClick="getValues()">Get Arrow Values</div><br/>
		Start (seconds):<input type="text" value="2" id="Start">
		End (seconds): <input type="text" value="5" id="End">
	</div>
  </body>
</html>
